<html>
  <head>
    <title>Simple Markers</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
	 <!-- Make sure you put this AFTER Leaflet's CSS -->
     <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""></script>
	
	<style type="text/css">
     /* 
      * Always set the map height explicitly to define the size of the div element
      * that contains the map. 
      */
     #map {
       height: 100%;
     }
     
     /* 
      * Optional: Makes the sample page fill the window. 
      */
     html,
     body {
       height: 100%;
       margin: 0;
       padding: 0;
     }
  </Style>  
	
	
  </head>
  <body>
    <div id="map"></div>
    <script>
	
	  var lat = 45.795220;
	  var lon = 15.963862;
      var latold = lat;
      var lonold = lon;	  
	  var map = L.map('map').setView([lat,lon], 13);
	  var tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'Â© OpenStreetMap'}).addTo(map);
	  var marker = L.marker([lat, lon]).addTo(map).bindPopup('<b>My car</b>').openPopup();
	  var circle = L.circle([lat, lon], {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.2,
        radius: 50  
        }).addTo(map); 
      // create a red polyline from an array of LatLng points
      var latlngs = [
       [lat, lon],
	   [lat, lon]
      ];
	  
	  if ('pero' == 'pero') {
   	    map.flyTo([lat,lon], 17 , {duration:3});
	  }
	  
      var polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);

	  window.addEventListener("load",updatePoints);
	  function updatePoints() {
	   const d = new Date();
	   var options = {
        weekday: "long",
        year: "numeric",
        month: "2-digit",
        day: "numeric"
        };
	   let datestr = d.toLocaleString("en-GB",options);
	   //var rand1 = Math.random();
	   //var rand2 = Math.random();
	   var newLatlngs = [[latold, lonold],[lat,lon]];
	   var newPolyline = L.polyline(newLatlngs, {color: 'black', weight:20}).addTo(map); 
	   var newPolyline = L.polyline(newLatlngs, {color: 'blue', weight:15}).addTo(map);

       // change points
       setTimeout(function(){ updatePoints(); }, 2000);	   
       map.invalidateSize();
	   marker.setLatLng([lat,lon]);
	   circle.setLatLng([lat, lon]);
	   marker.setPopupContent();
       marker.setPopupContent('<b>Denki </b>' + datestr);
	   //polyline.setLatLngs([[latold, lonold],[lat,lon]]);
	   latold = lat;
	   lonold = lon;
	   //lat = lat - (rand1 * 1);
	   //lon = lon + (rand2 * 2);
	   lon = lon + 0.000;
	   lon = lon - 0.001;
	   }
	   
    </script>
	
  </body>
</html>